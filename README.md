# üöÄ ClickHouse EnergyHub

**–°–æ–≤—Ä–µ–º–µ–Ω–Ω–∞—è –ø–ª–∞—Ç—Ñ–æ—Ä–º–∞ Data Warehouse –¥–ª—è —ç–Ω–µ—Ä–≥–µ—Ç–∏—á–µ—Å–∫–æ–π –æ—Ç—Ä–∞—Å–ª–∏**

[![License: MIT](https://img.shields.io/badge/License-MIT-yellow.svg)](https://opensource.org/licenses/MIT)
[![Python 3.11+](https://img.shields.io/badge/python-3.11+-blue.svg)](https://www.python.org/downloads/)
[![ClickHouse 23.8+](https://img.shields.io/badge/ClickHouse-23.8+-green.svg)](https://clickhouse.com/)
[![dbt 1.10+](https://img.shields.io/badge/dbt-1.10+-orange.svg)](https://www.getdbt.com/)
[![Airflow 2.7+](https://img.shields.io/badge/Airflow-2.7+-red.svg)](https://airflow.apache.org/)

## üéØ –û –ø—Ä–æ–µ–∫—Ç–µ

ClickHouse EnergyHub - —ç—Ç–æ –ø–æ–ª–Ω–æ—Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª—å–Ω–∞—è –ø–ª–∞—Ç—Ñ–æ—Ä–º–∞ –¥–ª—è —Å–±–æ—Ä–∞, –æ–±—Ä–∞–±–æ—Ç–∫–∏ –∏ –∞–Ω–∞–ª–∏–∑–∞ –¥–∞–Ω–Ω—ã—Ö –≤ —ç–Ω–µ—Ä–≥–µ—Ç–∏—á–µ—Å–∫–æ–π –æ—Ç—Ä–∞—Å–ª–∏. –°–∏—Å—Ç–µ–º–∞ –ø–æ—Å—Ç—Ä–æ–µ–Ω–∞ –Ω–∞ —Å–æ–≤—Ä–µ–º–µ–Ω–Ω—ã—Ö —Ç–µ—Ö–Ω–æ–ª–æ–≥–∏—è—Ö –∏ –æ–±–µ—Å–ø–µ—á–∏–≤–∞–µ—Ç –≤—ã—Å–æ–∫—É—é –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å, –º–∞—Å—à—Ç–∞–±–∏—Ä—É–µ–º–æ—Å—Ç—å –∏ –Ω–∞–¥–µ–∂–Ω–æ—Å—Ç—å.

### ‚ú® –ö–ª—é—á–µ–≤—ã–µ –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç–∏

- üóÑÔ∏è **ClickHouse –∫–ª–∞—Å—Ç–µ—Ä** —Å 4 —É–∑–ª–∞–º–∏ –¥–ª—è –∞–Ω–∞–ª–∏—Ç–∏–∫–∏ –≤ —Ä–µ–∞–ª—å–Ω–æ–º –≤—Ä–µ–º–µ–Ω–∏
- üîÑ **Apache Airflow** –¥–ª—è –æ—Ä–∫–µ—Å—Ç—Ä–∞—Ü–∏–∏ –¥–∞–Ω–Ω—ã—Ö –∏ –∞–≤—Ç–æ–º–∞—Ç–∏–∑–∞—Ü–∏–∏ –ø—Ä–æ—Ü–µ—Å—Å–æ–≤
- üßπ **dbt** –¥–ª—è —Ç—Ä–∞–Ω—Å—Ñ–æ—Ä–º–∞—Ü–∏–∏ –¥–∞–Ω–Ω—ã—Ö –∏ –æ–±–µ—Å–ø–µ—á–µ–Ω–∏—è –∫–∞—á–µ—Å—Ç–≤–∞
- üìä **–ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∞—è –¥–µ–¥—É–ø–ª–∏–∫–∞—Ü–∏—è** –¥–∞–Ω–Ω—ã—Ö –∫–∞–∂–¥—ã–µ 5 –º–∏–Ω—É—Ç
- üîç **–î–∏–Ω–∞–º–∏—á–µ—Å–∫–æ–µ –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ** dbt –∏—Å—Ç–æ—á–Ω–∏–∫–æ–≤ –Ω–∞ –æ—Å–Ω–æ–≤–µ ClickHouse
- üìà **Superset & Metabase** –¥–ª—è –≤–∏–∑—É–∞–ª–∏–∑–∞—Ü–∏–∏ –∏ —Å–∞–º–æ–æ–±—Å–ª—É–∂–∏–≤–∞–Ω–∏—è
- üöÄ **CI/CD –ø–∞–π–ø–ª–∞–π–Ω** –¥–ª—è –∞–≤—Ç–æ–º–∞—Ç–∏–∑–∞—Ü–∏–∏ —Ä–∞–∑–≤–µ—Ä—Ç—ã–≤–∞–Ω–∏—è
- üìã **Terraform** –¥–ª—è —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è –∏–Ω—Ñ—Ä–∞—Å—Ç—Ä—É–∫—Ç—É—Ä–æ–π –∫–∞–∫ –∫–æ–¥

## üèóÔ∏è –ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞

–°–∏—Å—Ç–µ–º–∞ –ø–æ—Å—Ç—Ä–æ–µ–Ω–∞ –ø–æ –ø—Ä–∏–Ω—Ü–∏–ø–∞–º **Data Vault 2.0** —Å —ç–ª–µ–º–µ–Ω—Ç–∞–º–∏ **Kimball Dimensional Modeling**:

```mermaid
graph TB
    %% –ò—Å—Ç–æ—á–Ω–∏–∫–∏ –¥–∞–Ω–Ω—ã—Ö
    subgraph "üåä Data Sources"
        KAFKA[Kafka Topics<br/>energy_data_1min<br/>energy_data_5min]
        API[External APIs<br/>Energy Market<br/>River Sensors]
        FILES[File Sources<br/>CSV, JSON, XML]
    end
    
    %% –°–ª–æ–∏ –¥–∞–Ω–Ω—ã—Ö
    subgraph "üìä Data Layers"
        subgraph "üì• Raw Layer"
            RAW[–°—ã—Ä—ã–µ –¥–∞–Ω–Ω—ã–µ<br/>‚Ä¢ –ò–º–º—É—Ç–∞–±–µ–ª—å–Ω–æ—Å—Ç—å<br/>‚Ä¢ –ü–æ–ª–Ω–æ—Ç–∞<br/>‚Ä¢ –ê—É–¥–∏—Ç]
        end
        
        subgraph "üîß ODS Layer"
            ODS[–û–ø–µ—Ä–∞—Ü–∏–æ–Ω–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ<br/>‚Ä¢ –û—á–∏—Å—Ç–∫–∞<br/>‚Ä¢ –°—Ç–∞–Ω–¥–∞—Ä—Ç–∏–∑–∞—Ü–∏—è<br/>‚Ä¢ –í–∞–ª–∏–¥–∞—Ü–∏—è]
        end
        
        subgraph "üßπ DDS Layer"
            DDS[–î–µ—Ç–∞–ª–∏–∑–∏—Ä–æ–≤–∞–Ω–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ<br/>‚Ä¢ –î–µ–¥—É–ø–ª–∏–∫–∞—Ü–∏—è<br/>‚Ä¢ –ë–∏–∑–Ω–µ—Å-–ª–æ–≥–∏–∫–∞<br/>‚Ä¢ –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è]
        end
        
        subgraph "üìà CDM Layer"
            CDM[–ê–Ω–∞–ª–∏—Ç–∏—á–µ—Å–∫–∏–µ –∫—É–±—ã<br/>‚Ä¢ KPI & –º–µ—Ç—Ä–∏–∫–∏<br/>‚Ä¢ –î–µ–Ω–æ—Ä–º–∞–ª–∏–∑–∞—Ü–∏—è<br/>‚Ä¢ –ê–≥—Ä–µ–≥–∞—Ü–∏—è]
        end
    end
    
    %% ClickHouse –∫–ª–∞—Å—Ç–µ—Ä
    subgraph "üóÑÔ∏è ClickHouse Cluster dwh_prod"
        subgraph "Shard 1"
            CH1[clickhouse-01<br/>Replica 1]
            CH3[clickhouse-03<br/>Replica 2]
        end
        subgraph "Shard 2"
            CH2[clickhouse-02<br/>Replica 1]
            CH4[clickhouse-04<br/>Replica 2]
        end
        subgraph "Coordination"
            CHK1[Keeper 1]
            CHK2[Keeper 2]
            CHK3[Keeper 3]
        end
    end
    
    %% BI –∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç—ã
    subgraph "üìä BI & Analytics"
        SUPERSET[Apache Superset<br/>–ê–Ω–∞–ª–∏—Ç–∏—á–µ—Å–∫–∏–µ –¥–∞—à–±–æ—Ä–¥—ã]
        METABASE[Metabase<br/>–°–∞–º–æ–æ–±—Å–ª—É–∂–∏–≤–∞–Ω–∏–µ]
        GRAFANA[Grafana<br/>–ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥]
    end
    
    %% –ü–æ—Ç–æ–∫–∏ –¥–∞–Ω–Ω—ã—Ö
    KAFKA --> RAW
    API --> RAW
    FILES --> RAW
    
    RAW --> ODS
    ODS --> DDS
    DDS --> CDM
    
    %% ClickHouse –∫–ª–∞—Å—Ç–µ—Ä
    RAW -.-> CH1
    RAW -.-> CH3
    ODS -.-> CH2
    ODS -.-> CH4
    
    %% BI –¥–æ—Å—Ç—É–ø
    CDM --> SUPERSET
    CDM --> METABASE
    CDM --> GRAFANA
    
    %% –°—Ç–∏–ª–∏
    classDef source fill:#e3f2fd,stroke:#1976d2,stroke-width:2px
    classDef layer fill:#f3e5f5,stroke:#7b1fa2,stroke-width:2px
    classDef cluster fill:#e8f5e8,stroke:#388e3c,stroke-width:2px
    classDef bi fill:#fff3e0,stroke:#f57c00,stroke-width:2px
    
    class KAFKA,API,FILES source
    class RAW,ODS,DDS,CDM layer
    class CH1,CH2,CH3,CH4,CHK1,CHK2,CHK3 cluster
    class SUPERSET,METABASE,GRAFANA bi
```

### üîÑ –ü–æ—Ç–æ–∫ –¥–∞–Ω–Ω—ã—Ö

```mermaid
flowchart LR
    subgraph "üåä Sources"
        S1[Kafka Streams]
        S2[External APIs]
        S3[File Uploads]
    end
    
    subgraph "üîÑ Processing"
        INGEST[Ingestion<br/>ClickHouse]
        VALIDATE[Validation<br/>Data Quality]
        CLEAN[Cleaning<br/>Standardization]
        BUSINESS[Business Logic<br/>Transformation]
        ANALYTICS[Analytics<br/>Aggregation]
    end
    
    subgraph "üìä Output"
        REPORT[Reporting<br/>Dashboards]
        API_OUT[API Endpoints]
        EXPORT[Data Export]
    end
    
    S1 --> INGEST
    S2 --> INGEST
    S3 --> INGEST
    
    INGEST --> VALIDATE
    VALIDATE --> CLEAN
    CLEAN --> BUSINESS
    BUSINESS --> ANALYTICS
    
    ANALYTICS --> REPORT
    ANALYTICS --> API_OUT
    ANALYTICS --> EXPORT
    
    %% –°—Ç–∏–ª–∏
    classDef source fill:#e1f5fe,stroke:#01579b,stroke-width:2px
    classDef process fill:#f3e5f5,stroke:#4a148c,stroke-width:2px
    classDef output fill:#e8f5e8,stroke:#1b5e20,stroke-width:2px
    
    class S1,S2,S3 source
    class INGEST,VALIDATE,CLEAN,BUSINESS,ANALYTICS process
    class REPORT,API_OUT,EXPORT output
```

## üöÄ –ë—ã—Å—Ç—Ä—ã–π —Å—Ç–∞—Ä—Ç

**–†–∞–∑–≤–µ—Ä—Ç—ã–≤–∞–Ω–∏–µ –∑–∞ 15 –º–∏–Ω—É—Ç!**

```bash
# 1. –ö–ª–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏–µ —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏—è
git clone https://github.com/principalwater/clickhouse-energyhub.git
cd clickhouse-energyhub

# 2. –ó–∞–ø—É—Å–∫ —Ä–∞–∑–≤–µ—Ä—Ç—ã–≤–∞–Ω–∏—è
./deploy.sh
```

**üìñ –ü–æ–¥—Ä–æ–±–Ω—ã–π —Ç—É—Ç–æ—Ä–∏–∞–ª:** [QUICK_START.md](QUICK_START.md)

## üìö –î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è

### üèóÔ∏è –û—Å–Ω–æ–≤–Ω–∞—è –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è

- **[üèóÔ∏è –ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞ DWH](docs/ARCHITECTURE.md)** - –ü–æ–¥—Ä–æ–±–Ω–æ–µ –æ–ø–∏—Å–∞–Ω–∏–µ –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä—ã, —Å–ª–æ–µ–≤ –¥–∞–Ω–Ω—ã—Ö –∏ –Ω–µ–π–º–∏–Ω–≥ –∫–æ–Ω–≤–µ–Ω—Ü–∏–π
- **[üîó –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è dbt —Å ClickHouse](docs/DBT_INTEGRATION.md)** - –ü–æ–ª–Ω–æ–µ —Ä—É–∫–æ–≤–æ–¥—Å—Ç–≤–æ –ø–æ —Ä–∞–±–æ—Ç–µ —Å dbt –º–æ–¥–µ–ª—è–º–∏, —Ç–µ—Å—Ç–∞–º–∏ –∏ –º–∞–∫—Ä–æ—Å–∞–º–∏
- **[üöÄ CI/CD Pipeline](docs/CI_CD.md)** - –ê–≤—Ç–æ–º–∞—Ç–∏–∑–∞—Ü–∏—è —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∏, —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è –∏ —Ä–∞–∑–≤–µ—Ä—Ç—ã–≤–∞–Ω–∏—è

### üîß –°–ø–µ—Ü–∏–∞–ª–∏–∑–∏—Ä–æ–≤–∞–Ω–Ω–∞—è –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è

- **[üîÑ DAG Deduplication Pipeline](docs/README_deduplication.md)** - –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∞—è –æ—á–∏—Å—Ç–∫–∞ –¥—É–±–ª–µ–π –∏ –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ –∏—Å—Ç–æ—á–Ω–∏–∫–æ–≤
- **[üíæ ClickHouse Backup Pipeline](docs/README_clickhouse_backup.md)** - –°–∏—Å—Ç–µ–º–∞ —Ä–µ–∑–µ—Ä–≤–Ω–æ–≥–æ –∫–æ–ø–∏—Ä–æ–≤–∞–Ω–∏—è –∏ –≤–æ—Å—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∏—è
- **[üöÄ –†—É–∫–æ–≤–æ–¥—Å—Ç–≤–æ –ø–æ —Ä–∞–∑–≤–µ—Ä—Ç—ã–≤–∞–Ω–∏—é](docs/DEPLOYMENT.md)** - –ü–æ–¥—Ä–æ–±–Ω–æ–µ —Ä—É–∫–æ–≤–æ–¥—Å—Ç–≤–æ –ø–æ —Ä–∞–∑–≤–µ—Ä—Ç—ã–≤–∞–Ω–∏—é —Å–∏—Å—Ç–µ–º—ã
- **[‚òÅÔ∏è –ù–∞—Å—Ç—Ä–æ–π–∫–∞ Apache Airflow](docs/AIRFLOW_SETUP.md)** - –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è –∏ –Ω–∞—Å—Ç—Ä–æ–π–∫–∞ Airflow
- **[üíæ –†—É–∫–æ–≤–æ–¥—Å—Ç–≤–æ –ø–æ —Ä–µ–∑–µ—Ä–≤–Ω–æ–º—É –∫–æ–ø–∏—Ä–æ–≤–∞–Ω–∏—é](docs/BACKUP_GUIDE.md)** - –°–∏—Å—Ç–µ–º–∞ –±—ç–∫–∞–ø–æ–≤ –∏ –≤–æ—Å—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∏—è
- **[üìä –°–æ–∑–¥–∞–Ω–∏–µ —Ç–∞–±–ª–∏—Ü –∏–∑ Kafka](docs/KAFKA_TO_CH_TABLE_CREATE_README.md)** - DAG –¥–ª—è –¥–∏–Ω–∞–º–∏—á–µ—Å–∫–æ–≥–æ —Å–æ–∑–¥–∞–Ω–∏—è —Ç–∞–±–ª–∏—Ü

### üìÅ –°—Ç—Ä—É–∫—Ç—É—Ä–∞ –ø—Ä–æ–µ–∫—Ç–∞

```
clickhouse-energyhub/
‚îú‚îÄ‚îÄ README.md                  # –û—Å–Ω–æ–≤–Ω–æ–π —Ñ–∞–π–ª –ø—Ä–æ–µ–∫—Ç–∞
‚îú‚îÄ‚îÄ QUICK_START.md            # –ë—ã—Å—Ç—Ä—ã–π —Å—Ç–∞—Ä—Ç –∏ —Ä–∞–∑–≤–µ—Ä—Ç—ã–≤–∞–Ω–∏–µ
‚îú‚îÄ‚îÄ üìö docs/                    # –î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è –ø—Ä–æ–µ–∫—Ç–∞
‚îÇ   ‚îú‚îÄ‚îÄ ARCHITECTURE.md        # –ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞ DWH
‚îÇ   ‚îú‚îÄ‚îÄ DBT_INTEGRATION.md     # –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è dbt
‚îÇ   ‚îú‚îÄ‚îÄ CI_CD.md               # CI/CD –ø–∞–π–ø–ª–∞–π–Ω
‚îÇ   ‚îú‚îÄ‚îÄ DEPLOYMENT.md          # –†—É–∫–æ–≤–æ–¥—Å—Ç–≤–æ –ø–æ —Ä–∞–∑–≤–µ—Ä—Ç—ã–≤–∞–Ω–∏—é
‚îÇ   ‚îú‚îÄ‚îÄ AIRFLOW_SETUP.md       # –ù–∞—Å—Ç—Ä–æ–π–∫–∞ Apache Airflow
‚îÇ   ‚îú‚îÄ‚îÄ BACKUP_GUIDE.md        # –†—É–∫–æ–≤–æ–¥—Å—Ç–≤–æ –ø–æ —Ä–µ–∑–µ—Ä–≤–Ω–æ–º—É –∫–æ–ø–∏—Ä–æ–≤–∞–Ω–∏—é
‚îÇ   ‚îú‚îÄ‚îÄ KAFKA_TO_CH_TABLE_CREATE_README.md # –°–æ–∑–¥–∞–Ω–∏–µ —Ç–∞–±–ª–∏—Ü –∏–∑ Kafka
‚îÇ   ‚îú‚îÄ‚îÄ README_deduplication.md # DAG –¥–µ–¥—É–ø–ª–∏–∫–∞—Ü–∏–∏
‚îÇ   ‚îî‚îÄ‚îÄ README_clickhouse_backup.md # DAG –±—ç–∫–∞–ø–æ–≤
‚îú‚îÄ‚îÄ üèóÔ∏è infra/                   # –ò–Ω—Ñ—Ä–∞—Å—Ç—Ä—É–∫—Ç—É—Ä–∞
‚îÇ   ‚îú‚îÄ‚îÄ terraform/             # Terraform –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è
‚îÇ   ‚îî‚îÄ‚îÄ docker/                # Docker –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è
‚îú‚îÄ‚îÄ üîÑ airflow/                 # Apache Airflow
‚îÇ   ‚îî‚îÄ‚îÄ dags/                  # DAG'–∏ –¥–ª—è –æ—Ä–∫–µ—Å—Ç—Ä–∞—Ü–∏–∏
‚îú‚îÄ‚îÄ üßπ dbt/                     # dbt –ø—Ä–æ–µ–∫—Ç—ã
‚îÇ   ‚îú‚îÄ‚îÄ models/                # –ú–æ–¥–µ–ª–∏ –¥–∞–Ω–Ω—ã—Ö
‚îÇ   ‚îú‚îÄ‚îÄ tests/                 # –¢–µ—Å—Ç—ã
‚îÇ   ‚îî‚îÄ‚îÄ tools/                 # –£—Ç–∏–ª–∏—Ç—ã
‚îú‚îÄ‚îÄ üìú scripts/                 # –°–∫—Ä–∏–ø—Ç—ã –∞–≤—Ç–æ–º–∞—Ç–∏–∑–∞—Ü–∏–∏
‚îú‚îÄ‚îÄ üß™ tests/                   # –¢–µ—Å—Ç—ã –ø—Ä–æ–µ–∫—Ç–∞
‚îî‚îÄ‚îÄ üìã deploy.sh                # –°–∫—Ä–∏–ø—Ç —Ä–∞–∑–≤–µ—Ä—Ç—ã–≤–∞–Ω–∏—è
```

## üåü –û—Å–Ω–æ–≤–Ω—ã–µ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç—ã

### üóÑÔ∏è ClickHouse Cluster

- **4 —É–∑–ª–∞** —Å —Ä–µ–ø–ª–∏–∫–∞—Ü–∏–µ–π –∏ —à–∞—Ä–¥–∏—Ä–æ–≤–∞–Ω–∏–µ–º
- **–í—ã—Å–æ–∫–∞—è –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å** –¥–ª—è –∞–Ω–∞–ª–∏—Ç–∏—á–µ—Å–∫–∏—Ö –∑–∞–ø—Ä–æ—Å–æ–≤
- **–ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ –º–∞—Å—à—Ç–∞–±–∏—Ä–æ–≤–∞–Ω–∏–µ** –∏ –±–∞–ª–∞–Ω—Å–∏—Ä–æ–≤–∫–∞ –Ω–∞–≥—Ä—É–∑–∫–∏
- **–í—Å—Ç—Ä–æ–µ–Ω–Ω–∞—è —Å–∏—Å—Ç–µ–º–∞** —Ä–µ–∑–µ—Ä–≤–Ω–æ–≥–æ –∫–æ–ø–∏—Ä–æ–≤–∞–Ω–∏—è

### üîÑ Apache Airflow

- **–û—Ä–∫–µ—Å—Ç—Ä–∞—Ü–∏—è** –≤—Å–µ—Ö –ø—Ä–æ—Ü–µ—Å—Å–æ–≤ –æ–±—Ä–∞–±–æ—Ç–∫–∏ –¥–∞–Ω–Ω—ã—Ö
- **–ü–ª–∞–Ω–∏—Ä–æ–≤—â–∏–∫ –∑–∞–¥–∞—á** —Å –Ω–∞—Å—Ç—Ä–∞–∏–≤–∞–µ–º—ã–º —Ä–∞—Å–ø–∏—Å–∞–Ω–∏–µ–º
- **–ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥** –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è –∏ —É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è –æ–± –æ—à–∏–±–∫–∞—Ö
- **–ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è** —Å ClickHouse –∏ dbt

### üßπ dbt (data build tool)

- **–¢—Ä–∞–Ω—Å—Ñ–æ—Ä–º–∞—Ü–∏—è –¥–∞–Ω–Ω—ã—Ö** —á–µ—Ä–µ–∑ SQL
- **–ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ** –∫–∞—á–µ—Å—Ç–≤–∞ –¥–∞–Ω–Ω—ã—Ö
- **–î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è** –º–æ–¥–µ–ª–µ–π –∏ –∏—Å—Ç–æ—á–Ω–∏–∫–æ–≤
- **–í–µ—Ä—Å–∏–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏–µ** —Å—Ö–µ–º—ã –¥–∞–Ω–Ω—ã—Ö

### üìä –í–∏–∑—É–∞–ª–∏–∑–∞—Ü–∏—è

- **Apache Superset** - –∞–Ω–∞–ª–∏—Ç–∏—á–µ—Å–∫–∏–µ –¥–∞—à–±–æ—Ä–¥—ã
- **Metabase** - —Å–∞–º–æ–æ–±—Å–ª—É–∂–∏–≤–∞–Ω–∏–µ –∞–Ω–∞–ª–∏—Ç–∏–∫–∏
- **Grafana** - –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥ –∏ –∞–ª–µ—Ä—Ç—ã

## üîÑ –ê–≤—Ç–æ–º–∞—Ç–∏–∑–∞—Ü–∏—è

### üßπ –°–∏—Å—Ç–µ–º–∞ –¥–µ–¥—É–ø–ª–∏–∫–∞—Ü–∏–∏

**DAG `deduplication_pipeline`** –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏:

- üîÑ **–û–±–Ω–æ–≤–ª—è–µ—Ç dbt sources** –Ω–∞ –æ—Å–Ω–æ–≤–µ —Ç–∞–±–ª–∏—Ü –≤ ClickHouse
- üßπ **–£–¥–∞–ª—è–µ—Ç –¥—É–±–ª–∏** –∏–∑ `raw.river_flow` –∏ `ods.market_data`
- üìä **–°–æ–∑–¥–∞–µ—Ç –æ—á–∏—â–µ–Ω–Ω—ã–µ —Ç–∞–±–ª–∏—Ü—ã** –≤ —Å–ª–æ–µ DDS
- ‚úÖ **–ó–∞–ø—É—Å–∫–∞–µ—Ç —Ç–µ—Å—Ç—ã** –¥–ª—è –ø—Ä–æ–≤–µ—Ä–∫–∏ –∫–∞—á–µ—Å—Ç–≤–∞ –¥–∞–Ω–Ω—ã—Ö
- üìà **–ì–µ–Ω–µ—Ä–∏—Ä—É–µ—Ç –æ—Ç—á–µ—Ç—ã** –ø–æ —Ä–µ–∑—É–ª—å—Ç–∞—Ç–∞–º –æ–±—Ä–∞–±–æ—Ç–∫–∏

**–†–∞—Å–ø–∏—Å–∞–Ω–∏–µ:** –ö–∞–∂–¥—ã–µ 5 –º–∏–Ω—É—Ç

### üíæ –°–∏—Å—Ç–µ–º–∞ —Ä–µ–∑–µ—Ä–≤–Ω–æ–≥–æ –∫–æ–ø–∏—Ä–æ–≤–∞–Ω–∏—è

**DAG `clickhouse_backup_pipeline`** –æ–±–µ—Å–ø–µ—á–∏–≤–∞–µ—Ç:

- üíæ **–°–æ–∑–¥–∞–Ω–∏–µ –±—ç–∫–∞–ø–æ–≤** ClickHouse
- üìã **–í–µ—Ä–∏—Ñ–∏–∫–∞—Ü–∏—é** —Ü–µ–ª–æ—Å—Ç–Ω–æ—Å—Ç–∏ –±—ç–∫–∞–ø–æ–≤
- üîÑ **–í–æ—Å—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∏–µ** –¥–∞–Ω–Ω—ã—Ö –ø—Ä–∏ –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ—Å—Ç–∏
- üßπ **–û—á–∏—Å—Ç–∫—É** —Å—Ç–∞—Ä—ã—Ö –±—ç–∫–∞–ø–æ–≤
- üìä **–ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥** –∑–¥–æ—Ä–æ–≤—å—è —Å–∏—Å—Ç–µ–º—ã

## üöÄ CI/CD Pipeline

### üîÑ –ê–≤—Ç–æ–º–∞—Ç–∏–∑–∞—Ü–∏—è —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∏

- **GitHub Actions** –¥–ª—è –Ω–µ–ø—Ä–µ—Ä—ã–≤–Ω–æ–π –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏–∏
- **–ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ** –∫–æ–¥–∞ –∏ –∏–Ω—Ñ—Ä–∞—Å—Ç—Ä—É–∫—Ç—É—Ä—ã
- **–°–∫–∞–Ω–∏—Ä–æ–≤–∞–Ω–∏–µ –±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç–∏** –∏ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–µ–π
- **–ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ —Ä–∞–∑–≤–µ—Ä—Ç—ã–≤–∞–Ω–∏–µ** —á–µ—Ä–µ–∑ Terraform

### üß™ –ö–∞—á–µ—Å—Ç–≤–æ –∫–æ–¥–∞

- **Linting** —Å flake8, black, isort
- **Unit —Ç–µ—Å—Ç—ã** —Å pytest
- **–ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏–æ–Ω–Ω—ã–µ —Ç–µ—Å—Ç—ã** –¥–ª—è –≤—Å–µ—Ö –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–æ–≤
- **Coverage –æ—Ç—á–µ—Ç—ã** –∏ quality gates

## üìä –ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥ –∏ –º–µ—Ç—Ä–∏–∫–∏

### üîç –ö–ª—é—á–µ–≤—ã–µ –º–µ—Ç—Ä–∏–∫–∏

- **Data Freshness** - –∞–∫—Ç—É–∞–ª—å–Ω–æ—Å—Ç—å –¥–∞–Ω–Ω—ã—Ö
- **Data Quality** - –∫–∞—á–µ—Å—Ç–≤–æ –¥–∞–Ω–Ω—ã—Ö
- **Processing Time** - –≤—Ä–µ–º—è –æ–±—Ä–∞–±–æ—Ç–∫–∏
- **Error Rate** - —á–∞—Å—Ç–æ—Ç–∞ –æ—à–∏–±–æ–∫
- **Storage Usage** - –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ —Ö—Ä–∞–Ω–∏–ª–∏—â–∞

### üö® –ê–ª–µ—Ä—Ç—ã

- **Pipeline Failures** - —Å–±–æ–∏ –≤ –ø–∞–π–ø–ª–∞–π–Ω–∞—Ö
- **Data Quality Issues** - –ø—Ä–æ–±–ª–µ–º—ã —Å –∫–∞—á–µ—Å—Ç–≤–æ–º
- **Performance Degradation** - –¥–µ–≥—Ä–∞–¥–∞—Ü–∏—è –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç–∏
- **Storage Thresholds** - –ø—Ä–µ–≤—ã—à–µ–Ω–∏–µ –ª–∏–º–∏—Ç–æ–≤

## üõ†Ô∏è –¢–µ—Ö–Ω–æ–ª–æ–≥–∏—á–µ—Å–∫–∏–π —Å—Ç–µ–∫

### üóÑÔ∏è –ë–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö
- **ClickHouse** - –∞–Ω–∞–ª–∏—Ç–∏—á–µ—Å–∫–∞—è –°–£–ë–î
- **PostgreSQL** - –º–µ—Ç–∞–¥–∞–Ω–Ω—ã–µ –∏ –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è
- **Redis** - –∫—ç—à–∏—Ä–æ–≤–∞–Ω–∏–µ –∏ –æ—á–µ—Ä–µ–¥–∏

### üîÑ –û—Ä–∫–µ—Å—Ç—Ä–∞—Ü–∏—è
- **Apache Airflow** - –ø–ª–∞–Ω–∏—Ä–æ–≤—â–∏–∫ –∑–∞–¥–∞—á
- **dbt** - —Ç—Ä–∞–Ω—Å—Ñ–æ—Ä–º–∞—Ü–∏—è –¥–∞–Ω–Ω—ã—Ö
- **Kafka** - –ø–æ—Ç–æ–∫–æ–≤–∞—è –æ–±—Ä–∞–±–æ—Ç–∫–∞

### üèóÔ∏è –ò–Ω—Ñ—Ä–∞—Å—Ç—Ä—É–∫—Ç—É—Ä–∞
- **Docker** - –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–∏–∑–∞—Ü–∏—è
- **Terraform** - –∏–Ω—Ñ—Ä–∞—Å—Ç—Ä—É–∫—Ç—É—Ä–∞ –∫–∞–∫ –∫–æ–¥
- **Portainer** - —É–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–∞–º–∏

### üß™ –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –∏ –∫–∞—á–µ—Å—Ç–≤–æ
- **pytest** - —Ñ—Ä–µ–π–º–≤–æ—Ä–∫ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è
- **flake8, black, isort** - –ª–∏–Ω—Ç–µ—Ä—ã –∏ —Ñ–æ—Ä–º–∞—Ç—Ç–µ—Ä—ã
- **CodeQL** - –∞–Ω–∞–ª–∏–∑ –±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç–∏
- **Trivy** - —Å–∫–∞–Ω–∏—Ä–æ–≤–∞–Ω–∏–µ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–æ–≤

## üîÆ –ü–ª–∞–Ω—ã —Ä–∞–∑–≤–∏—Ç–∏—è

### üéØ –ö—Ä–∞—Ç–∫–æ—Å—Ä–æ—á–Ω—ã–µ (3-6 –º–µ—Å—è—Ü–µ–≤)
- [ ] –†–µ–∞–ª–∏–∑–∞—Ü–∏—è Data Lineage
- [ ] –ê–≤—Ç–æ–º–∞—Ç–∏–∑–∞—Ü–∏—è —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è –¥–∞–Ω–Ω—ã—Ö
- [ ] –£–ª—É—á—à–µ–Ω–∏–µ –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥–∞
- [ ] Machine Learning –º–æ–¥–µ–ª–∏

### üöÄ –°—Ä–µ–¥–Ω–µ—Å—Ä–æ—á–Ω—ã–µ (6-12 –º–µ—Å—è—Ü–µ–≤)
- [ ] Real-time Analytics
- [ ] –†–∞—Å—à–∏—Ä–µ–Ω–Ω—ã–µ –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏–∏
- [ ] Multi-cloud –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞
- [ ] Advanced Analytics Platform

### üåü –î–æ–ª–≥–æ—Å—Ä–æ—á–Ω—ã–µ (1+ –≥–æ–¥)
- [ ] AI-powered Insights
- [ ] Automated Data Governance
- [ ] Edge Computing –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è
- [ ] Quantum Computing –≥–æ—Ç–æ–≤–Ω–æ—Å—Ç—å

## ü§ù –£—á–∞—Å—Ç–∏–µ –≤ –ø—Ä–æ–µ–∫—Ç–µ

### üìù –ö–∞–∫ –≤–Ω–µ—Å—Ç–∏ –≤–∫–ª–∞–¥

1. **Fork** —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏—è
2. **–°–æ–∑–¥–∞–π—Ç–µ** feature branch (`git checkout -b feature/amazing-feature`)
3. **–ó–∞—Ñ–∏–∫—Å–∏—Ä—É–π—Ç–µ** –∏–∑–º–µ–Ω–µ–Ω–∏—è (`git commit -m 'Add amazing feature'`)
4. **Push** –≤ branch (`git push origin feature/amazing-feature`)
5. **–û—Ç–∫—Ä–æ–π—Ç–µ** Pull Request

### üêõ –°–æ–æ–±—â–µ–Ω–∏–µ –æ–± –æ—à–∏–±–∫–∞—Ö

- –ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ [GitHub Issues](https://github.com/principalwater/clickhouse-energyhub/issues)
- –û–ø–∏—à–∏—Ç–µ –ø—Ä–æ–±–ª–µ–º—É –ø–æ–¥—Ä–æ–±–Ω–æ
- –ü—Ä–∏–ª–æ–∂–∏—Ç–µ –ª–æ–≥–∏ –∏ —Å–∫—Ä–∏–Ω—à–æ—Ç—ã
- –£–∫–∞–∂–∏—Ç–µ –≤–µ—Ä—Å–∏–∏ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–æ–≤

### üí° –ü—Ä–µ–¥–ª–æ–∂–µ–Ω–∏—è

- –°–æ–∑–¥–∞–π—Ç–µ [GitHub Discussion](https://github.com/principalwater/clickhouse-energyhub/discussions)
- –û–ø–∏—à–∏—Ç–µ –∏–¥–µ—é –∏ –æ–±–æ—Å–Ω–æ–≤–∞–Ω–∏–µ
- –û–±—Å—É–¥–∏—Ç–µ —Å —Å–æ–æ–±—â–µ—Å—Ç–≤–æ–º
- –°–æ–∑–¥–∞–π—Ç–µ –ø—Ä–æ—Ç–æ—Ç–∏–ø –ø—Ä–∏ –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ—Å—Ç–∏

## üìÑ –õ–∏—Ü–µ–Ω–∑–∏—è

–≠—Ç–æ—Ç –ø—Ä–æ–µ–∫—Ç —Ä–∞—Å–ø—Ä–æ—Å—Ç—Ä–∞–Ω—è–µ—Ç—Å—è –ø–æ–¥ –ª–∏—Ü–µ–Ω–∑–∏–µ–π MIT. –°–º. —Ñ–∞–π–ª [LICENSE](LICENSE) –¥–ª—è –ø–æ–¥—Ä–æ–±–Ω–æ—Å—Ç–µ–π.

## üôè –ë–ª–∞–≥–æ–¥–∞—Ä–Ω–æ—Å—Ç–∏

- **ClickHouse Team** –∑–∞ –æ—Ç–ª–∏—á–Ω—É—é –∞–Ω–∞–ª–∏—Ç–∏—á–µ—Å–∫—É—é –°–£–ë–î
- **Apache Airflow** –∑–∞ –º–æ—â–Ω—É—é –æ—Ä–∫–µ—Å—Ç—Ä–∞—Ü–∏—é –¥–∞–Ω–Ω—ã—Ö
- **dbt Labs** –∑–∞ –∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç —Ç—Ä–∞–Ω—Å—Ñ–æ—Ä–º–∞—Ü–∏–∏ –¥–∞–Ω–Ω—ã—Ö
- **–°–æ–æ–±—â–µ—Å—Ç–≤–æ** –∑–∞ –≤–∫–ª–∞–¥ –∏ –ø–æ–¥–¥–µ—Ä–∂–∫—É

## üìû –ü–æ–¥–¥–µ—Ä–∂–∫–∞

### üîó –ü–æ–ª–µ–∑–Ω—ã–µ —Å—Å—ã–ª–∫–∏

- **–î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è:** [docs/](docs/)
- **Issues:** [GitHub Issues](https://github.com/principalwater/clickhouse-energyhub/issues)
- **Discussions:** [GitHub Discussions](https://github.com/principalwater/clickhouse-energyhub/discussions)
- **Wiki:** [GitHub Wiki](https://github.com/principalwater/clickhouse-energyhub/wiki)

### üìß –ö–æ–Ω—Ç–∞–∫—Ç—ã

- **Developer:** [principalwater](https://github.com/principalwater)

---

**‚≠ê –ï—Å–ª–∏ –ø—Ä–æ–µ–∫—Ç –≤–∞–º –ø–æ–Ω—Ä–∞–≤–∏–ª—Å—è, –ø–æ—Å—Ç–∞–≤—å—Ç–µ –∑–≤–µ–∑–¥–æ—á–∫—É!**
